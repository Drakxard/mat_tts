<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frase del Día - Sistema de Gestión</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            500: '#3B82F6',
                            600: '#2563EB',
                            700: '#1D4ED8'
                        }
                    }
                }
            }
        };
    </script>
</head>
<body class="h-full bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white">
    
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-gray-900/80 backdrop-blur-sm border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <button onclick="showHome()" class="text-white hover:text-blue-400 transition-colors">
                        <i class="fas fa-home mr-2"></i>Inicio
                    </button>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="showAdmin()" class="text-gray-300 hover:text-white transition-colors">
                        <i class="fas fa-cog mr-2"></i>Administración
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Home Section -->
    <!-- @COMPONENT: HomePage -->
    <section id="home-section" class="min-h-screen flex items-center justify-center pt-16">
        <div class="text-center space-y-8 max-w-2xl mx-auto p-8">
            <h1 class="text-6xl md:text-8xl font-light text-white tracking-wide">Buen día</h1>
            
            <div class="w-24 h-px bg-gradient-to-r from-transparent via-white to-transparent mx-auto opacity-50"></div>
            
            <div class="space-y-4">
                <button 
                    onclick="getPhrase()"
                    id="phrase-button"
                    class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg"
                    data-event="click:getPhrase"
                    data-implementation="Should fetch phrase from /api/frase endpoint">
                    <span id="button-text">Obtener Frase</span>
                </button>
                
                <!-- @STATE: phrase:string = "", loading:boolean = false -->
                <div id="phrase-container" class="hidden mt-8 p-6 bg-gray-800 rounded-lg border border-gray-700">
                    <p id="phrase-text" class="text-white text-lg leading-relaxed" data-bind="phrase">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                </div>
                
                <p id="remaining-requests" class="text-gray-400 text-sm hidden" data-bind="remaining">
                    Requests restantes hoy: <span data-bind="remaining">95</span>/100
                </p>
            </div>
            
            <div class="text-gray-400 text-sm space-y-2">
                <p>API pública con límite de 100 requests por día</p>
                <p>
                    Endpoint: <code class="bg-gray-800 px-2 py-1 rounded">GET /api/frase</code>
                </p>
            </div>
        </div>
    </section>
    <!-- @END_COMPONENT: HomePage -->

    <!-- Admin Section -->
    <!-- @COMPONENT: AdminPanel -->
    <section id="admin-section" class="hidden min-h-screen pt-20 pb-8">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-white mb-2">Panel de Administración</h1>
                <p class="text-gray-400">Gestiona las frases del sistema</p>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <div class="flex items-center">
                        <i class="fas fa-quote-left text-blue-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-gray-400 text-sm">Total Frases</p>
                            <p class="text-2xl font-bold text-white" data-bind="totalPhrases">247</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <div class="flex items-center">
                        <i class="fas fa-eye text-green-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-gray-400 text-sm">Frase Actual</p>
                            <p class="text-2xl font-bold text-white" data-bind="currentIndex">15</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <div class="flex items-center">
                        <i class="fas fa-chart-line text-purple-500 text-2xl mr-3"></i>
                        <div>
                            <p class="text-gray-400 text-sm">Requests Hoy</p>
                            <p class="text-2xl font-bold text-white" data-bind="dailyRequests">5</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Cards -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Bulk Add Phrases -->
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-plus-circle text-blue-500 text-xl mr-3"></i>
                        <h2 class="text-xl font-semibold text-white">Agregar Frases en Masa</h2>
                    </div>
                    <p class="text-gray-400 text-sm mb-4">Agrega múltiples frases separadas por punto y coma (;)</p>
                    
                    <form data-implementation="Should handle bulk phrase addition">
                        <textarea 
                            id="bulk-phrases"
                            rows="6"
                            class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                            placeholder="Frase 1; Frase 2; Frase 3; ..."
                            data-mock="true">La vida es bella; El conocimiento es poder; Cada día es una nueva oportunidad</textarea>
                        
                        <div class="flex items-center justify-between mt-4">
                            <p class="text-sm text-gray-400">
                                <span id="phrase-count" data-bind="phraseCount">3</span> frases detectadas
                            </p>
                            <button 
                                type="submit"
                                onclick="addBulkPhrases()"
                                class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"
                                data-event="click:addBulkPhrases">
                                <i class="fas fa-upload mr-2"></i>Agregar Frases
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Export/Import Section -->
                <div class="space-y-6">
                    <!-- Export Phrases -->
                    <div class="bg-gray-800 rounded-lg p-6 border border-gray-700">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-download text-green-500 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-white">Exportar Frases</h2>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Descarga todas las frases en formato de texto</p>
                        
                        <div class="space-y-3">
                            <button 
                                onclick="exportPhrases('txt')"
                                class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"
                                data-event="click:exportPhrases">
                                <i class="fas fa-file-text mr-2"></i>Exportar como TXT
                            </button>
                            <button 
                                onclick="exportPhrases('csv')"
                                class="w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"
                                data-event="click:exportPhrases">
                                <i class="fas fa-file-csv mr-2"></i>Exportar como CSV
                            </button>
                        </div>
                    </div>

                    <!-- Danger Zone -->
                    <div class="bg-red-900/20 border border-red-800 rounded-lg p-6">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-white">Zona de Peligro</h2>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Esta acción no se puede deshacer</p>
                        
                        <button 
                            onclick="showDeleteConfirmation()"
                            class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"
                            data-event="click:deleteAllPhrases">
                            <i class="fas fa-trash mr-2"></i>Eliminar Todas las Frases
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Phrases -->
            <div class="mt-8 bg-gray-800 rounded-lg border border-gray-700">
                <div class="p-6 border-b border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="fas fa-list text-blue-500 text-xl mr-3"></i>
                            <h2 class="text-xl font-semibold text-white">Frases Recientes</h2>
                        </div>
                        <button 
                            onclick="refreshPhrases()"
                            class="px-3 py-1 text-sm text-gray-400 hover:text-white transition-colors"
                            data-event="click:refreshPhrases">
                            <i class="fas fa-refresh mr-1"></i>Actualizar
                        </button>
                    </div>
                </div>
                
                <div class="p-6">
                    <!-- @MAP: recentPhrases.map((phrase, index) => ( -->
                    <div class="space-y-3" data-implementation="Should display recent phrases from database">
                        <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg" data-mock="true">
                            <div class="flex items-center">
                                <span class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold mr-3">1</span>
                                <p class="text-white">La vida es una aventura que debe ser vivida al máximo</p>
                            </div>
                            <button class="text-red-400 hover:text-red-300 transition-colors" data-event="click:deletePhrase">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg" data-mock="true">
                            <div class="flex items-center">
                                <span class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold mr-3">2</span>
                                <p class="text-white">El conocimiento es el único tesoro que nadie puede robar</p>
                            </div>
                            <button class="text-red-400 hover:text-red-300 transition-colors" data-event="click:deletePhrase">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-gray-700 rounded-lg" data-mock="true">
                            <div class="flex items-center">
                                <span class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-semibold mr-3">3</span>
                                <p class="text-white">Cada día es una nueva oportunidad para ser mejor</p>
                            </div>
                            <button class="text-red-400 hover:text-red-300 transition-colors" data-event="click:deletePhrase">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <!-- @END_MAP -->
                    
                    <div class="mt-4 text-center">
                        <button 
                            onclick="loadMorePhrases()"
                            class="px-4 py-2 text-sm text-blue-400 hover:text-blue-300 transition-colors"
                            data-event="click:loadMorePhrases">
                            Ver más frases...
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- @END_COMPONENT: AdminPanel -->

    <!-- Delete Confirmation Modal -->
    <!-- @COMPONENT: DeleteModal -->
    <div id="delete-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-gray-800 rounded-lg p-6 m-4 max-w-md w-full border border-gray-700">
            <div class="flex items-center mb-4">
                <i class="fas fa-exclamation-triangle text-red-500 text-2xl mr-3"></i>
                <h3 class="text-xl font-semibold text-white">Confirmar Eliminación</h3>
            </div>
            <p class="text-gray-300 mb-6">¿Estás seguro de que quieres eliminar todas las frases? Esta acción no se puede deshacer.</p>
            <div class="flex space-x-3">
                <button 
                    onclick="hideDeleteConfirmation()"
                    class="flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                    Cancelar
                </button>
                <button 
                    onclick="confirmDeleteAll()"
                    class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors"
                    data-event="click:confirmDeleteAll">
                    Eliminar Todo
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: DeleteModal -->

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
        <div class="text-center">
            <i class="fas fa-spinner fa-spin text-4xl text-blue-500 mb-4"></i>
            <p class="text-white text-lg">Procesando...</p>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="hidden fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="success-message">Operación completada con éxito</span>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="hidden fixed top-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50">
        <div class="flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span id="error-message">Ha ocurrido un error</span>
        </div>
    </div>

    <script>
        (function() {
            // Navigation Functions
            window.showHome = function() {
                document.getElementById('home-section').classList.remove('hidden');
                document.getElementById('admin-section').classList.add('hidden');
            };

            window.showAdmin = function() {
                document.getElementById('home-section').classList.add('hidden');
                document.getElementById('admin-section').classList.remove('hidden');
            };

            // Phrase Functions
            window.getPhrase = function() {
                const button = document.getElementById('phrase-button');
                const buttonText = document.getElementById('button-text');
                const phraseContainer = document.getElementById('phrase-container');
                const phraseText = document.getElementById('phrase-text');
                const remainingRequests = document.getElementById('remaining-requests');

                // Show loading state
                button.disabled = true;
                buttonText.textContent = 'Obteniendo...';

                // TODO: Implement actual API call to /api/frase
                setTimeout(() => {
                    // Mock response
                    const mockPhrases = [
                        "La vida es una aventura que debe ser vivida al máximo",
                        "El conocimiento es el único tesoro que nadie puede robar",
                        "Cada día es una nueva oportunidad para ser mejor",
                        "La perseverancia es la clave del éxito",
                        "Los sueños se hacen realidad cuando trabajas por ellos"
                    ];
                    const randomPhrase = mockPhrases[Math.floor(Math.random() * mockPhrases.length)];
                    
                    phraseText.textContent = randomPhrase;
                    phraseContainer.classList.remove('hidden');
                    remainingRequests.classList.remove('hidden');
                    
                    // Reset button
                    button.disabled = false;
                    buttonText.textContent = 'Obtener Frase';
                }, 1000);
            };

            // Admin Functions
            window.addBulkPhrases = function() {
                const textarea = document.getElementById('bulk-phrases');
                const phrases = textarea.value.split(';').map(p => p.trim()).filter(p => p.length > 0);
                
                if (phrases.length === 0) {
                    showError('Por favor ingresa al menos una frase');
                    return;
                }

                showLoading();
                // TODO: Implement bulk phrase addition API call
                setTimeout(() => {
                    hideLoading();
                    showSuccess(`${phrases.length} frases agregadas exitosamente`);
                    textarea.value = '';
                    updatePhraseCount();
                }, 1500);
            };

            window.exportPhrases = function(format) {
                showLoading();
                // TODO: Implement export functionality
                setTimeout(() => {
                    hideLoading();
                    showSuccess(`Frases exportadas en formato ${format.toUpperCase()}`);
                }, 1000);
            };

            window.showDeleteConfirmation = function() {
                document.getElementById('delete-modal').classList.remove('hidden');
            };

            window.hideDeleteConfirmation = function() {
                document.getElementById('delete-modal').classList.add('hidden');
            };

            window.confirmDeleteAll = function() {
                hideDeleteConfirmation();
                showLoading();
                // TODO: Implement delete all functionality
                setTimeout(() => {
                    hideLoading();
                    showSuccess('Todas las frases han sido eliminadas');
                }, 1500);
            };

            window.refreshPhrases = function() {
                showLoading();
                // TODO: Implement refresh functionality
                setTimeout(() => {
                    hideLoading();
                    showSuccess('Lista actualizada');
                }, 800);
            };

            window.loadMorePhrases = function() {
                // TODO: Implement pagination
                showSuccess('Cargando más frases...');
            };

            // Utility Functions
            function showLoading() {
                document.getElementById('loading-overlay').classList.remove('hidden');
            }

            function hideLoading() {
                document.getElementById('loading-overlay').classList.add('hidden');
            }

            function showSuccess(message) {
                const toast = document.getElementById('success-toast');
                document.getElementById('success-message').textContent = message;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 3000);
            }

            function showError(message) {
                const toast = document.getElementById('error-toast');
                document.getElementById('error-message').textContent = message;
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 3000);
            }

            function updatePhraseCount() {
                const textarea = document.getElementById('bulk-phrases');
                const phrases = textarea.value.split(';').map(p => p.trim()).filter(p => p.length > 0);
                document.getElementById('phrase-count').textContent = phrases.length;
            }

            // Event Listeners
            document.getElementById('bulk-phrases').addEventListener('input', updatePhraseCount);

            // Close modal on outside click
            document.getElementById('delete-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideDeleteConfirmation();
                }
            });

            // Initialize
            updatePhraseCount();
        })();
    </script>
</body>
</html>